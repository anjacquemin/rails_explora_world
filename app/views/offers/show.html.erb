
<div id="offer_carrousel" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <% @offer.photos.size.times do |i| %>
    <button type="button" data-bs-target="#offer_carrousel" data-bs-slide-to="<%= i %>" class="<%= "active" if i==0%>" aria-current="<%= "true" if i==0%>" aria-label="Slide <%= i %>"></button>
    <%end%>
  </div>
  <div class="carousel-inner">
    <% @offer.photos.each_with_index do |photo, i| %>
      <div class="carousel-item <%= "active" if i==0%>">
        <%= cl_image_tag photo.key, height: 300, width: 400, crop: :fill, class:"d-block w-100" %>
      </div>
    <%end%>

  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#offer_carrousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#offer_carrousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

    <h3 class="text-center m-5"> <%= @offer.title %></h3>
    <div class="d-flex justify-content-around gray-background p-3" data-slots-display-target="description">
      <div class="show-description p-3">
        <h4 class="mt-3 mb-2"> Description </h4>
        <div class="stars d-flex mb-2 mt-2">
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star-half-alt"></i>
        </div>
        <div class="d-flex">
          <i class="fas fa-comment-alt"></i>
          <p class="ms-2">230 reviews</p>
        </div>
        <p class = "mt-2 ms-2"><%= @offer.description %> Lorem ipsum dolor sit amet consectetur adipisicing elit. Sequi minus tempora, autem exercitationem numquam tempore ad dolores sed non iste accusamus! Nostrum sed temporibus atque assumenda possimus dolorem perferendis nobis!
        Placeat, reprehenderit dicta iste id reiciendis nam animi totam tempora, eligendi vero quos natus beatae praesentium culpa maxime cumque earum ab voluptatibus nihil ratione. Doloremque repudiandae esse temporibus enim modi!</p>
      </div>
      <div class="show-map">
        <div style="width: 100%; height: 400px;"
          data-controller="mapbox"
          data-mapbox-markers-value="<%= @markers.to_json %>"
          data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
        </div>
      </div>
    </div>


    <div class="d-flex justify-content-around m-5">
      <div>
        <h3 class="text-center mb-5">LIVE</h3>
        <div class="card">
          <section class="top"></section>
          <div class="event-info">
            <p id="price"><%= @offer.price.round %>$</p>
            <p class="title"><%= @offer.title %></p>

            <div class="additional-info">
              <p class="info">
                <i class="fas fa-map-marker-alt"></i>
                <%= @offer.city %>
                </p>
              <p class="info">
                <i class="fas fa-calendar-alt"></i>
                <%= @offer.slots.all[0].start_at %>
              </p>
              <p class= "info">
                <i class="fas fa-video"></i>
                <%= "#{@offer.slots.all[0].user.first_name} #{@offer.slots.all[0].user.last_name}"%>
              </p>
              <button class= "info" data-action="click->slots-display#display" data-bs-toggle="modal" data-bs-target="#staticBackdrop">full schedule</button>
            </div>
            <button class="action"><%= link_to "register", slot_rentals_path(@offer.slots.all[0]), method: :post%></button>
          </div>
        </div>
      </div>
      <div>
        <h3 class="text-center mb-5">VOD</h3>
        <div class="card">
          <section class="top"></section>
          <div class="event-info">
            <p id="price"><%= @offer.price.round %>$</p>
            <p class="title"><%= @offer.title %></p>

            <div class="additional-info">
              <p class="info">
                <i class="fas fa-map-marker-alt"></i>
                <%= @offer.city %>
                </p>
              <p class="info">
                <i class="fas fa-calendar-alt"></i>
                <%= @offer.slots.all[0].start_at %>
              </p>
              <p class= "info">
                <i class="fas fa-clock"></i>
                2h
              </p>
              <p class= "info">

              </p>
            </div>
            <button class="action">Register</button>
          </div>
        </div>
      </div>
    </div>

    <div class="vertical-divider mb-5 mt-5">
    </div>


    <div class="vertical-divider mb-5 mt-5">
      <h3>Comments</h3>
    </div>

    <div class="vertical-divider mb-5 mt-5">
    </div>


    <%# <div class="card-hp-category"> %>
    <%# <% @offer.photos.each do |photo| %>
      <%# <%= cl_image_tag photo.key, height: 300, width: 400, crop: :fill %>
    <%# <% end %>
    <%# </div> %>
  </div>

  <div class="slots-display d-none" data-slots-display-target="slots">
    <h3>Schedule (target : make it appears when clicking on schedule)</h3>
    <% @offer.slots.each do |slot|%>
    <div class="d-flex">
      <div>
        <p> <%=slot.start_at %> </p>
      </div>
      <div>
        <button> Register </button>
      </div>
    </div>
    <% end %>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h3>Schedule</h3>
        <% @offer.slots.each do |slot|%>
        <div class="d-flex">
          <div>
            <p> <%=slot.start_at %> </p>
          </div>
          <div>
            <button> Register </button>
          </div>
        </div>
        <% end %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Understood</button>
      </div>
    </div>
  </div>
</div>


<div class="footer">
    <div class="footer-links">
      <a href="#"><i class="fab fa-github"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-facebook"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-linkedin"></i></a>
    </div>
    <a href="#top">Back to top</a>
    <div class="footer-copyright">
      Let's explore the <i class="fas fa-globe-americas"></i> with Explora World !
    </div>
  </div>